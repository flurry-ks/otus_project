# Требования к системе

## Нефункциональные требования

### Производительность
- Отклик системы должен составлять не более 1 мс.
- Система должна выдерживать пиковую нагрузку в 5 000 заказов в сутки.
- Система должна обеспечивать среднюю нагрузку в 2 000 заказов в сутки.
- Система должна обрабатывать 100 заказов одновременно.
- Система должна обеспечивать среднюю скорость приготовления заказа 2 минуты
- Система должна поддерживать работу 14 роботов.
### Безопасность
- Система не должна сохранять персональные данные неавторизованных клиентов.
- Система должна шифровать данные логин и пароль.
- Система должна обеспечивать ограничение ролей и доступов в систему:
  - авторизованный посетитель
  - неавторизованный посетитель
  - технолог
  - менеджер гостеприимства
### Масштабируемость
- Система должна обеспечивать масштабируемость до 10 000 пользователей в сутки с сохранением текущего уровня производительности.
- Система должна поддерживать масштабирование для роботизации 25 действующих ресторанов сети через 3 года и 71 ресторана сети — через 5 лет.
### Совместимость
- Должна быть интеграция с текущей CRM-системой.
- Должна быть интеграция с текущей системой 1C.
- Должна быть интеграция с текущей системой закупок, управления ассортиментом и учета остатков.
- Должна быть интеграция с текущей системой заказов.
- Должна быть интеграция с текущей системой роботов.
- Необходимо использовать текущую интеграцию с платежными системами.
### Доступность
- Система должна быть доступна 99% времени.
- Необходимо обеспечить круглосуточную работу системы.
### Концептуальная целостность
- Мобильное приложение должно быть разработано на Flutter.
- Backend должен быть разработан на Java.
- Тачпойнт для заказа в ресторане должен быть разработан на Java.
- Система должна использовать российскую облачную инфраструктуру.
### Возможность повторного использования
- Система должна быть масштабируема на другие рестораны сети.
### Поддерживаемость
- Система должна логировать действия роботов.

## Функциональные требования

### Диаграмма вариантов использования
[Ссылка на диаграмму вариантов использования на языке PluntUML](/docs/diagrams/usecase.puml)
![Диаграмма вариантов использования](/docs/diagrams/usecase.png)

### Варианты использования

|Вариант использования:||
|-----------------------|---------------------------------------------------------|
|Описание||
|Предусловия||
|Постусловия||
|Основной поток||
|Альтернативный поток||

|Вариант использования:|Оформить заказ в мобильном приложении|
|-----------------------|---------------------------------------------------------|
|Описание|Посетитель может оформить заказ мобильном приложении.|
|Предусловия|1. Открыт торговый день<br/>2. В ассортименте есть блюда, доступные для заказа|
|Постусловия|1. Заказ поступил в производство<br/>2. Зафиксирована запись об оплате в кассовой системе|
|Основной поток|1. Посетитель открывает мобильное приложение<br/>2. [Переход к сценарию "Посмотреть меню"](#menu)<br/>3. [Переход к сценарию "Добавить позицию в корзину"](#add_position)<br/>4. Посетитель инициирует оплату<br/>5. Система отображает полный список заказанного<br/>6. Посетитель указывает, где будет есть: с собой или в зале<br/>7. Система спрашивает, является ли посетитель участником нашей программы лояльности<br/>8. [Переход к сценарию "Авторизоваться в программе лояльности"](#authorization)<br/>9. Система предлагает начислить или списать бонусы<br/>10. Пользователь выбирает, начислить или списать бонусы<br/>11. Система подсчитывает итоговую сумму с учетом бонусов<br/>12. [Переход к сценарию "Оплатить заказ"](#pay)<br/>13. Система присваивает номер заказу<br/>14. Система отображает информацию о заказе|
|Альтернативный поток|7.a. Сумма заказа более 1500 рублей или в заказе есть специальное комбо<br/>1. Система добавляет в заказ подарок<br/>2. Сценарий продолжается с шага 8 основного потока<br/><br/>10.a. Посетитель отказывается авторизоваться в программе лояльности<br/>1. Сценарий продолжается с шага 12 основного потока<br/><br/>11.а. Заказ происходит в будние дни с 10:00 до 16:00 по местному времени<br/>1. Система делает скидку<br/>2. Сценарий продолжается с шага 12 основного потока|
|Прерывание процесса|1. Система позволяет на каждом шаге вернуться в главное меню, не теряя черновик корзины.<br/>2. Система на любом шаге позволяет завершить процесс оформления заказа.|

|Вариант использования:|<a name="menu"><a/>Посмотртеть меню|
|-----------------------|---------------------------------------------------------|
|Описание|Посетитель может посмотреть позиции меню с разбивкой по категориям|
|Предусловия|1. В ассортименте есть блюда, доступные для заказа|
|Основной поток|1. Пользователь открывает приложение.<br/>2. Система отображает главный экран приложения с меню<br/>3. Пользователь выбирает категорию<br/>4. Система совершает скролл до выбранной категории<br/>5.Пользователь при помощи скролла просматривает позиции меню|
|Альтернативный поток|5.a. Пользователь выбирает другую категорию<br/>1. Сценарий продолжается с шага 4 основного потока.|

|Вариант использования:|Посмотреть информацию о позиции меню|
|-----------------------|---------------------------------------------------------|
|Описание|Посетитель может посмотреть подробную информацию о позиции меню: фото, описание, состав, пищевую ценность|
|Предусловия|1. В ассортименте есть блюда, доступные для заказа|
|Постусловия|Система отобразила подробную информацию о выбранной позиции|
|Основной поток|1. Пользователь открывает приложение.<br/>2. Система отображает главный экран приложения с меню.<br/>3. Пользователь нажимает на карточку выбранной позиции.<br/>4. Система открывает экран с подробной информацией о позиции.|
|Альтернативный поток|3.a. Пользователь нажимает кнопку добавления позиции в корзину<br/>1. [Переход к сценарию "Добавить позицию в корзину"](#add_position)|
|Прерывание процесса|1. Система позволяет на каждом шаге вернуться в главное меню|

|Вариант использования:|<a name="add_position"><a/>Добавить позицию в корзину|
|-----------------------|---------------------------------------------------------|
|Описание||
|Предусловия|1. В ассортименте есть блюда, доступные для заказа|
|Постусловия|Выбранная позиция добавлена в корзину|
|Основной поток|1. Пользователь открывает приложение.<br/>2. Система отображает главный экран приложения с меню.<br/>3. Пользователь нажимает на кнопку добавления позиции в корзину в карточке позиции<br/>4. Система добавляет позицию в корзину<br/>5. Система изменяет счетчик количества позиций в корзине на 1.|
|Альтернативный поток|3.a. Пользователь осуществляет переход на экран с подробной информацией о позиции.<br/>1.Пользователь выбирает количество товара.<br/>2. Пользователь нажимает кнопку добавления позиции в корзину на экране с подробной информацией.<br/>3. Сценарий продолжается с шага 4 основного потока.<br/><br/>5.a. Пользователь хочет добавить позицию повторно.<br/>1. Сценарий продолжается с шага 3 основного потока.|

|Вариант использования:|Изменить содержимое корзины|
|-----------------------|---------------------------------------------------------|
|Описание||
|Предусловия|1. В корзине есть позиции|
|Постусловия||
|Основной поток||
|Альтернативный поток||

|Вариант использования:|<a name="pay"><a/>Оплатить заказ|
|-----------------------|---------------------------------------------------------|
|Описание||
|Предусловия|1. У пользователя есть действующий заказ для оплаты (в корзину добавлена хотя бы одна позиция).|
|Постусловия|1. Заказ оплачен, и данные о транзакции успешно сохранены.<br/>2. Пользователь получает подтверждение в приложении.|
|Основной поток|1. Пользователь переходит на экран оплаты.<br/>2. Система предлагает пользователю выбор метода оплаты: СБП, банковская карта, бонусы.<br/>3. Пользователь выбирает желаемый метод оплаты.<br/>4. Система отображает экран ввода данных в соответствии со способом оплаты.<br/>5. Пользователь вводит необходимые данные и подтверждает оплату.<br/>6. Система отправляет данные на сервер для обработки платежа через выбранную платежную систему.<br/>7. Платежная система обрабатывает запрос и возвращает статус транзакции.<br/>8. Система отображает пользователю успешное завершение платежа.<br/>9. Пользователь получает подтверждение заказа и чек.|
|Альтернативный поток|
Платежная система возвращает ошибку.
Мобильное приложение уведомляет пользователя о неудачной транзакции и предлагает выбрать другой метод оплаты или повторить попытку.

Если пользователь выбирает оплату бонусами, но их недостаточно, мобильное приложение уведомляет пользователя и предлагает выбрать другой метод оплаты.

Если пользователь не авторизован в системе|

|Вариант использования:|<a name="authorization"><a/>Авторизоваться в программе лояльности|
|-----------------------|---------------------------------------------------------|
|Описание||
|Предусловия||
|Постусловия||
|Основной поток||
|Альтернативный поток||

|Вариант использования:|<a name="registration"><a/>Зарегистрироваться в программе лояльности|
|-----------------------|---------------------------------------------------------|
|Описание||
|Предусловия||
|Постусловия||
|Основной поток||
|Альтернативный поток||

|Вариант использования:|Посмотреть информацию в личном кабинете|
|-----------------------|---------------------------------------------------------|
|Описание||
|Предусловия||
|Постусловия||
|Основной поток||
|Альтернативный поток||

|Вариант использования:|Получить заказ|
|-----------------------|---------------------------------------------------------|
|Описание||
|Предусловия||
|Постусловия||
|Основной поток||
|Альтернативный поток||
